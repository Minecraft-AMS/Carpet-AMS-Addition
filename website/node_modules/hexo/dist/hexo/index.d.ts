/// <reference types="node" />
/// <reference types="node" />
import Promise from 'bluebird';
import Database from 'warehouse';
import { EventEmitter } from 'events';
import Module from 'module';
import logger from 'hexo-log';
import { Console, Deployer, Filter, Generator, Helper, Highlight, Injector, Migrator, Processor, Renderer, Tag } from '../extend';
import Render from './render';
import Post from './post';
import Scaffold from './scaffold';
import Source from './source';
import Router from './router';
import Theme from '../theme';
import Locals from './locals';
import defaultConfig from './default_config';
interface Args {
    debug?: any;
    safe?: any;
    silent?: any;
    _?: any[];
    output?: any;
    config?: any;
}
interface Extend {
    console: Console;
    deployer: Deployer;
    filter: Filter;
    generator: Generator;
    helper: Helper;
    highlight: Highlight;
    injector: Injector;
    migrator: Migrator;
    processor: Processor;
    renderer: Renderer;
    tag: Tag;
}
type DefaultConfigType = typeof defaultConfig;
interface Config extends DefaultConfigType {
    [key: string]: any;
}
declare module 'module' {
    function _nodeModulePaths(path: string): string[];
    function _resolveFilename(request: string, parent: Module, isMain?: any, options?: any): string;
    const _extensions: NodeJS.RequireExtensions, _cache: any;
}
declare class Hexo extends EventEmitter {
    base_dir: string;
    public_dir: string;
    source_dir: string;
    plugin_dir: string;
    script_dir: string;
    scaffold_dir: string;
    theme_dir: string;
    theme_script_dir: string;
    env: any;
    extend: Extend;
    config: Config;
    log: ReturnType<typeof logger>;
    render: Render;
    route: Router;
    post: Post;
    scaffold: Scaffold;
    _dbLoaded: boolean;
    _isGenerating: boolean;
    database: Database;
    config_path: string;
    source: Source;
    theme: Theme;
    locals: Locals;
    version: string;
    _watchBox: () => void;
    page: any;
    path: any;
    url: any;
    layout: any;
    view_dir: any;
    site: any;
    args: any;
    cache: any;
    alias: any;
    data: any;
    lib_dir: string;
    core_dir: string;
    static lib_dir: string;
    static core_dir: string;
    static version: string;
    constructor(base?: string, args?: Args);
    _bindLocals(): void;
    init(): Promise<void>;
    call(name: string, args: any, callback?: NodeJSLikeCallback<any>): any;
    model(name: string, schema?: any): any;
    resolvePlugin(name: string, basedir: string): any;
    loadPlugin(path: string, callback?: NodeJSLikeCallback<any>): Promise<any>;
    _showDrafts(): any;
    load(callback?: NodeJSLikeCallback<any>): Promise<any>;
    watch(callback?: NodeJSLikeCallback<any>): Promise<any>;
    unwatch(): void;
    _generateLocals(): {
        new (path: string, locals: any): {
            page: {
                path: string;
            };
            path: string;
            url: string;
            config: object;
            theme: object;
            layout: string;
            env: any;
            view_dir: string;
            site: object;
            cache?: boolean;
        };
    };
    _runGenerators(): Promise<any[]>;
    _routerRefresh(runningGenerators: Promise<any[]>, useCache: boolean): Promise<void>;
    _generate(options?: {
        cache?: boolean;
    }): Promise<any>;
    exit(err: any): Promise<void>;
    execFilter(type: string, data: any, options: any): Promise<any>;
    execFilterSync(type: string, data: any, options: any): any;
}
declare global {
    const hexo: Hexo;
}
export = Hexo;
